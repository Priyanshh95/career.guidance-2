<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Job Profiles</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <h1>Job Profiles</h1>
        
        <div class="mb-3">
            <label for="yearSelect" class="form-label">Select Year:</label>
            <select class="form-select" id="yearSelect" onchange="fetchJobs()">
                <option value="">-- Select Year --</option>
                <option value="2024">2024</option>
                <option value="2025">2025</option>
            </select>
        </div>

        <table class="table table-bordered" id="jobsTable">
            <thead>
                <tr>
                    <th>Company</th>
                    <th>Job Role</th>
                    <th>CGPA Criteria</th>
                    <th>Salary Package</th>
                    <th>Internship/Role Type</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>

    <script>
        function fetchJobs() {
            const year = document.getElementById('yearSelect').value;
            const tbody = document.querySelector('#jobsTable tbody');
            tbody.innerHTML = '';

            if (year) {
                fetch(`/get-jobs/${year}`)
                    .then(response => response.json())
                    .then(data => {
                        data.forEach(job => {
                            const row = document.createElement('tr');
                            row.innerHTML = `
                                <td>${job.Company || '-'}</td>
                                <td>${job['Job Roles'] || job['Job Role'] || '-'}</td>
                                <td>${job['CGPA Criteria'] || job['CGPA'] || '-'}</td>
                                <td>${job['Salary Package\n(in LPA)'] || job['CTC (in LPA)'] || '-'}</td>
                                <td>${job['Type of Role'] || job['Duration of Internship'] || '-'}</td>
                            `;
                            tbody.appendChild(row);
                        });
                    });
            }
        }
    </script>
</body>
</html>
